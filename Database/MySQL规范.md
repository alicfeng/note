## MySQL规范

#### 命名规范

- 对象名称必须使用小写，多单词统一使用下划线分割
- 命名的单词必须做到顾名思义，同时长度不要超过32个字符、保持简洁
- 禁止使用关键字并且尽量少用含有关键词来命名
- 临时表必须以`tmp_`开头、以日期结尾，备份表必须以`bak_`开头、以日期结尾



#### 设计规范

- 尽可能地使用`InnoDB`作为表的存储引擎

  > 在MySQL 5.6以后，`InnoDB`被设置成默认的存储引擎，它支持事务和行级锁

- 数据库和数据表统一使用`UTF8MB4`字符编码

- 所有的表和字段必须添加注释

- 尽量控制表行数在500万以内

- 尽可能做到冷热数据分离

- 禁止以图片、文件等二进制数据



#### 行为规范

- 禁止在线上做数据库的压力测试
- 对应的环境使用对应的数据库比如测试环境一定不能使用测试环境的数据库
- `super`权限只能属于`DBA`，不能赋予项目程序



#### 表设计规范

- 尽可能每张表的索引数量控制在5个以内
- 每一张`InnoDB`表都必须含有一个主键
- 尽可能脱离外键约束
- 设置数据表架构应考虑后期扩展型
- 遵循范式与冗余平衡规则
- 控制每张表的字段在20以内，否则业务分表



####　字段设计规范

- 尽可能不要在表中建立顾名思义的扩展字段
- 优先设置占存储空间最小的类型和长度
- 尽可能避免使用`TEXT`、`BLOB`、`ENUM`数据类型
- 尽可能将所有的数据列定义为`NOT NULL`类型
- 对于时间的字段尽可能使用时间戳的形式储存
- 金额相关的数据必须使用`DECIMAL`数据类型
- 表与表关联的键名保持一致或以关联表名的缩写为前缀
- 固定长度的字符串字段务必使用`CHAR`



#### SQL使用规范

- 建议使用预编译语句操作数据库
- 严禁使用`SELECT *`查询字段
- 必须避免数据类型隐式转换
- 充分利用利用索引优势
- 禁止使用相同的账号跨库操作
- 禁止使用带有数据值却不带有字段键名的`INSERT`操作
- 尽可能使用`JOIN`替代子查询操作
- 尽可能避免使用`JOIN`关联过多的表
- 合并操作、减少数据库的交互
- 尽可能使用`IN`代替`OR`语句
- 禁止使用`ORDER BY RAND()`随机排序语句
- 禁止在`WHERE`语句中进行计算
- 在已知数据你没有重复或极少重复使用`UNION ALL`而不是使用`UNION`
- 大批量写操作尽可能合理地分批次处理
- 不在数据库做运算，务必将运算置于业务层
- 禁止使用索引做运算
- `SQL`语句简单化

